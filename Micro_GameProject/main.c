/*
    Program : This is a game where you play as a princess that has to catch fruit a certain amount of fruit depending on the level. You have 3 lives
    
    Authors: Polina Tiukavkina, Heeyeon Yoon and Faith Omotayo.


*/

//these are the header files
#include <stm32f031x6.h>
//the header file for our functions
#include "display.h"
//the header file for music
#include "musical_notes.h"
//the header file for sound
#include "sound.h"
//the header file for the random numbers
#include "prbs.h"
#include <stdlib.h>
#include <stdint.h>
#include "serial.h"


//these are the symbolic names
#define MAX_FRUITS 2 // Maximum number of fruits
#define FRUIT_TYPES 4 // Number of fruit types


//the function signatures
void initClock(void);
void initSysTick(void);
void delay(volatile uint32_t dly);
void SysTick_Handler(void);
//
void setupIO();
//this function checks to see if an object is inside a certain point
int isInside(uint16_t x1, uint16_t y1, uint16_t w, uint16_t h, uint16_t px, uint16_t py);
void enablePullUp(GPIO_TypeDef *Port, uint32_t BitNumber);
void pinMode(GPIO_TypeDef *Port, uint32_t BitNumber, uint32_t Mode);
//this function is used to play a song
void playTune(uint32_t*,uint32_t*);

//these are global arrays (variables) being declared
int fruitX[MAX_FRUITS];
int fruitY[MAX_FRUITS];
int fruitSpeed[MAX_FRUITS];
int fruitType[MAX_FRUITS];
int fruitActive[MAX_FRUITS];

//declaring the millisecond variable
volatile uint32_t milliseconds;

void initFruits();
//this function updates the fruits as they fall and land in the game
uint16_t updateFruits(uint16_t,uint16_t,uint16_t*);
//2nd version for level2
uint16_t updateFruits2(uint16_t,uint16_t,uint16_t*);
//this function spawns the fruit randomly
void spawnRandomFruit(uint16_t,uint16_t,uint16_t);
//this function draws the fruit on the screen
void drawFruits();
void pop(uint16_t,uint16_t);
//this function updates the score as the player gets more points
void updateScore(uint16_t*);
//this is the for when the select button is pressed
int Selectpressed(void);
//this is the function for when the select button isnt pressed
int SelectNotPressed();
//this is the function for when the down button is pressed
int downPressed(void);
//this is the function for displaying the menu
void menu();
//this is the function for the displaying credits
void credits();
//this is the function for the help page
void help();
//this the funtion for the 2nd level of the game
void level2();
//this is the function for the players goals for the game
void goals();
//this is the function for the game
void game();
//this the function to start the game.
void start();
//this is the function to restart the game
void restart(void);
//this function will happen when the player loses the game
void lose(void);
void turnOffLeds();




//princess 
//this is the image for the princess
const uint16_t princess[]=
{
	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24324,7940,12570,0,64539,49680,0,8984,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7940,7940,6948,64291,56911,12570,64291,35674,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,44842,12570,12570,6948,6948,6948,65103,6948,0,0,38910,38910,62462,7423,7423,7423,30718,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24324,4378,7955,6948,7940,65103,65103,10747,65103,58331,15615,54270,7423,7423,7423,7423,7423,7423,54270,58331,0,0,0,0,0,0,0,0,0,0,0,24324,6948,12570,7955,7940,7940,7940,16147,6948,6948,0,7423,15615,53205,53205,53205,53205,53205,7423,0,0,0,0,0,0,0,0,0,0,0,0,0,65283,0,65283,7940,7940,6948,0,16147,16147,6948,0,0,51083,51083,51083,51083,51083,51083,51083,8720,0,0,0,0,0,0,0,0,0,0,0,0,65283,4378,7955,16147,16147,16147,6948,0,12570,16147,6948,65283,0,0,0,0,0,0,16912,0,0,0,0,0,0,0,0,0,0,0,0,0,7940,7940,57872,16147,16147,7940,6948,57343,0,57343,49119,12570,65535,0,40927,40927,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,12570,4378,12570,16147,7940,16147,65535,0,0,49119,0,65283,65535,40927,49119,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7955,7940,10747,10747,49119,7940,65535,0,0,49119,40927,65283,65535,65535,65535,65535,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24324,12570,16147,6948,10747,10747,7940,49119,64956,40927,49119,16334,49119,7940,65535,65535,65535,65535,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7940,12570,16147,16147,10747,10747,49119,49119,16334,16334,16334,40902,64956,0,7940,65535,65535,0,0,0,0,0,0,0,0,0,0,0,0,0,0,47642,15131,15131,16147,16147,16147,6948,16147,49119,49119,16334,16334,16334,49119,0,7940,7129,65535,0,0,0,0,0,0,0,0,0,0,0,0,0,0,65283,12570,15131,15131,16147,16147,16147,16147,21128,21128,16147,7129,49119,0,64472,64472,7129,7129,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,12570,7940,12570,16147,16147,16147,16147,65004,21128,21128,7129,7129,64472,7129,7129,7129,7129,7940,0,0,0,0,0,0,0,0,0,0,0,0,0,0,53530,12570,15131,16147,16147,21128,21128,65004,65004,65004,7129,65004,65004,65535,7129,7129,0,65283,0,0,0,0,0,0,0,0,0,0,0,0,0,65283,15131,15131,12570,16147,16147,16147,7129,7129,65004,65004,65004,65004,7129,7129,7129,0,65283,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7940,12570,15131,16147,16147,16147,6948,7129,7129,7129,65535,65004,65004,7129,0,0,65283,65283,0,0,0,0,0,0,0,0,0,0,0,0,65283,0,7940,15131,15131,6948,6948,16147,16147,16147,7129,7129,7129,7129,65535,7129,0,0,7940,7940,0,0,0,0,0,0,0,0,0,0,0,0,65283,12570,64291,15131,15131,7940,7940,21128,16147,16147,7129,7129,7129,7129,7129,7129,7129,7129,0,7940,7940,0,0,0,0,0,0,0,0,0,0,0,7940,12570,12570,4378,4378,6948,6948,6948,21128,7129,7129,7129,7129,7129,7129,7129,7129,7129,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6939,12570,7940,6948,21128,7129,7129,7129,7129,7129,7129,7129,7129,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,15131,12570,12570,7940,21128,7129,7129,7129,7129,7129,7129,7129,7129,7129,64472,15853,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,15123,7940,0,21128,7129,7129,7129,7129,7129,7129,7129,7129,7129,21128,7129,15853,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6931,7940,0,12936,7129,7129,15853,7129,7129,7129,15853,7129,7129,7129,21128,7129,15853,49127,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,29320,7129,15853,56020,7129,21128,7129,15853,56020,56020,7129,21128,7129,15853,21128,0,0,0,0,0,0,0,0,0,0,0,0,0,57343,57343,12936,21128,64472,7129,15853,56020,21128,21128,7129,15853,56020,21128,7129,21128,21128,21128,21128,12936,0,0,0,0,0,0,0,0,0,0,0,0,21128,7129,21128,7129,7129,15853,56020,21128,21128,21128,21128,21128,21128,21128,21128,21128,21128,21128,21128,21128,0,0,0,0,0,0,0,0,0,0,0,0,0,0,21128,21128,56258,21128,21128,21128,0,0,12936,21128,21128,21128,21128,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,12936,0,65535,57343,0,57343,57343,0,0,0,0,57343,57343,0,0,0,0,0,0,0,0,0
};
//this is the image of the princess moving
const uint16_t princessmove[]=
{
	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7940,7940,12570,0,24327,57872,57872,57872,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,12570,7940,7940,6948,6948,65103,12570,6948,35674,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,23050,0,12570,12570,12570,6948,6948,6948,65103,6948,0,0,38910,38910,62462,7423,7423,7423,38910,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7940,12570,16147,6948,7940,65103,65103,10747,65103,58587,15615,62462,7423,7423,7423,7423,7423,7423,62462,58587,0,0,0,0,0,0,0,0,0,0,0,7940,6948,12570,16147,7940,7940,7940,16147,6948,6948,0,7423,15615,53205,53205,53205,53205,53205,7423,0,0,0,0,0,0,0,0,0,0,0,0,0,7940,0,7940,7940,7940,6948,0,16147,16147,6948,0,0,51083,51083,51083,51083,51083,51083,51083,16912,0,0,0,0,0,0,0,0,0,0,0,0,7940,12570,16147,16147,16147,16147,6948,0,12570,16147,6948,7940,0,0,0,0,0,0,16912,0,0,0,0,0,0,0,0,0,0,0,0,0,7940,7940,57872,16147,16147,7940,6948,65535,0,65535,49119,12570,65535,0,49119,49119,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,12570,12570,12570,16147,7940,16147,65535,0,0,49119,0,7940,65535,49119,49119,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,12570,16147,7940,10747,10747,49119,7940,65535,0,0,49119,49119,7940,65535,65535,65535,65535,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7940,12570,16147,6948,10747,10747,7940,49119,64956,49119,49119,16334,49119,7940,65535,65535,65535,65535,0,0,0,0,0,0,0,0,0,0,0,0,23050,0,7940,12570,16147,16147,10747,10747,49119,49119,16334,16334,16334,40902,64956,0,7940,65535,65535,0,0,0,0,0,0,0,0,0,0,0,0,0,0,15131,15131,15131,16147,16147,16147,6948,16147,49119,49119,16334,16334,16334,49119,0,7940,7129,65535,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7940,12570,15131,15131,16147,16147,16147,16147,21128,21128,16147,7129,49119,0,7129,7129,7129,7129,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,12570,7940,12570,16147,16147,16147,16147,65004,21128,21128,7129,7129,7129,7129,7129,7129,7129,7940,0,0,0,0,0,0,0,0,0,0,0,0,0,0,12570,12570,15131,16147,16147,21128,21128,65004,65004,65004,7129,65004,65004,65535,7129,7129,0,7940,0,0,0,0,0,0,0,0,0,0,0,0,0,7940,15131,15131,12570,16147,16147,16147,7129,7129,65004,65004,65004,65004,7129,7129,7129,0,7940,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7940,12570,15131,16147,16147,16147,6948,7129,7129,7129,65535,65004,65004,7129,0,0,7940,7940,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7940,15131,15131,6948,6948,16147,16147,16147,7129,7129,7129,7129,65535,7129,0,0,7940,7940,65315,65315,0,0,0,0,0,0,0,0,0,0,7940,12570,6948,15131,15131,7940,7940,21128,16147,16147,7129,7129,7129,7129,7129,7129,7129,7129,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7940,12570,12570,12570,12570,6948,6948,6948,21128,7129,7129,7129,7129,7129,7129,7129,7129,7129,0,0,0,0,0,0,0,0,0,0,0,0,0,0,65315,0,0,0,15131,12570,7940,6948,21128,7129,7129,7129,7129,7129,7129,7129,7129,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,15131,12570,12570,7940,21128,7129,7129,7129,7129,7129,7129,7129,7129,7129,7129,15853,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,15131,7940,0,21128,7129,7129,7129,7129,7129,7129,7129,7129,7129,21128,7129,15853,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,15131,7940,0,21128,7129,7129,15853,7129,7129,7129,15853,7129,7129,7129,21128,7129,15853,57319,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,21128,7129,15853,56020,7129,21128,7129,15853,56020,56020,7129,21128,7129,15853,21128,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,21128,21128,7129,7129,15853,56020,21128,21128,7129,15853,56020,21128,7129,21128,21128,21128,21128,21128,0,0,0,0,0,0,0,0,0,0,0,0,0,0,21128,7129,7129,15853,56020,21128,21128,21128,21128,21128,21128,21128,21128,21128,21128,21128,21128,21128,0,0,0,0,0,0,0,0,0,0,0,0,7416,7416,21128,21128,56258,21128,21128,21128,0,0,21128,21128,21128,21128,21128,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,21128,0,0,65535,65535,0,0,0,0,0,65535,65535,0,0,0,0,0,0,0,0,0,0
};
//this is the image of the princess facing forward
const uint16_t princessfront[]=
{
	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,13294,13294,13294,13294,13294,13294,13294,13294,13294,13294,13294,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,13294,13294,13294,13294,65535,9609,17521,17521,9609,9609,1994,13294,13294,13294,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,20156,20156,1994,9609,9609,17521,17521,17521,9609,1994,20156,20156,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,20156,20156,20156,20156,20156,20156,20156,20156,20156,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,49095,12570,16147,7940,64258,64258,64258,64258,64258,64258,64258,49095,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,65535,65535,65315,64258,7940,7940,6948,65315,16147,16147,6948,64258,64258,65535,65535,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,65535,65535,65315,64258,0,16147,16147,6948,65315,65315,16147,6948,7940,65535,65535,65535,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,65535,65315,64258,16147,0,49095,49095,49095,65315,49095,49119,0,65315,65535,65535,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7416,65315,64258,0,65535,0,65535,49095,49095,65535,0,65535,0,7129,7129,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7416,12570,65315,64258,0,65535,0,0,49095,49095,0,0,65535,0,7129,7129,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7416,12570,65315,64258,0,65535,0,0,49095,49095,0,0,49095,0,7129,7129,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7416,12570,65315,16147,10747,57293,57293,49095,49095,49095,49095,57293,57293,16621,7940,7129,7129,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7416,15131,65315,16147,16147,49095,49095,49095,57293,57293,16334,49095,49095,65315,7940,7129,7129,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7416,15131,65315,16147,16147,16147,16147,49095,49095,49095,49095,49095,65315,7129,7129,7129,7129,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7416,7940,65315,16147,16147,16147,16147,65004,21128,21128,7129,7129,7129,7129,7129,7129,7129,7940,0,0,0,0,0,0,0,0,0,0,0,0,0,0,12570,12570,15131,16147,16147,21128,21128,65004,65004,65004,7129,65004,7129,7129,7129,7129,0,7940,0,0,0,0,0,0,0,0,0,0,0,0,0,7940,15131,15131,12570,7129,16147,7129,65535,7129,65004,65004,65004,65004,7129,7129,7129,0,7940,65315,0,0,0,0,0,0,0,0,0,0,0,0,65315,7940,12570,15131,16147,7129,7129,7129,7416,65535,7129,7129,7129,7129,7129,65315,65315,7940,7940,65315,0,0,0,0,0,0,0,0,0,0,0,7940,0,7940,15131,15131,6948,7129,7129,7129,7129,7129,7129,7129,7129,7129,7129,65315,65315,7940,7940,65315,0,0,0,0,0,0,0,0,0,0,0,7940,12570,6948,15131,15131,7940,7129,7129,7416,7129,7129,7129,7129,7129,7129,7129,7129,7129,64258,7940,7940,65315,0,0,0,0,0,0,0,0,0,0,7940,12570,12570,12570,12570,6948,7129,7129,7129,7129,7129,7129,7129,7129,7129,7129,7129,7129,64258,65315,65315,65315,0,0,0,0,0,0,0,0,0,0,0,65315,0,0,15131,7129,7129,7416,21128,7129,7129,7129,7129,7129,7129,7129,7129,64258,64258,64258,0,65315,0,0,0,0,0,0,0,0,0,0,0,0,65315,0,15131,7129,7416,7416,21128,7129,7129,7129,7129,7129,7129,7129,7129,7129,7129,15853,0,65315,65315,0,0,0,0,0,0,0,0,0,0,0,0,0,7129,7129,7416,21128,7129,7129,7129,7129,7129,7129,7129,7129,7129,7129,7129,15853,0,65315,0,0,0,0,0,0,0,0,0,0,0,0,0,15131,7129,7129,21128,7129,7129,15853,7129,7129,7129,15853,7129,7129,7129,7129,7129,15853,57319,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7129,7129,21128,7129,15853,56020,7129,21128,7129,15853,56020,7129,7129,7129,7129,15853,21128,0,0,0,0,0,0,0,0,0,0,0,0,0,7416,7416,21128,21128,7129,7129,15853,56020,21128,21128,7129,15853,56020,7129,7129,7129,7129,7129,7129,21128,0,0,0,0,0,0,0,0,0,0,0,0,21128,7129,21128,7129,7129,15853,56020,21128,21128,21128,21128,7129,7129,7129,7129,7129,7129,7129,7129,21128,0,0,0,0,0,0,0,0,0,0,0,0,0,0,21128,21128,56258,21128,21128,49095,0,0,21128,21128,21128,21128,21128,49095,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,21128,0,1994,1994,0,0,0,0,0,0,0,1994,1994,0,0,0,0,0,0,0,0,0
};

//fruits
//this is the image of the grape 
const uint16_t grape[]=
{
	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8985,58401,0,26161,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,26909,42245,25619,33792,47395,59705,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,59686,17931,14891,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,30956,15092,38635,26969,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,39676,7935,64508,46042,34897,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,10041,14316,6908,23036,47098,62698,38098,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17713,38363,47868,23036,14844,30458,46842,20921,51009,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,25632,14316,6908,47612,47612,22266,38650,45497,42288,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,34353,22764,15100,14844,46842,55034,22266,29113,42288,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,55276,63996,63996,30458,46842,37833,11112,42809,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,18241,39404,23292,46842,22002,35688,18241,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5586,4801,2121,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
};
//this is the image of the strawberry
const uint16_t strawberry[]=
{
	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,32870,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,32870,0,0,0,58406,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7952,7952,41019,32870,58406,58406,58406,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7952,7944,7944,7944,32870,62423,58406,58406,32870,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7944,7944,32512,7944,6440,41019,32804,32804,32870,32870,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7936,32512,24321,65535,65535,6440,6440,32804,32804,32870,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7936,32528,57186,32528,65477,65535,7940,7936,41019,32804,41019,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24321,24321,32528,0,57154,7940,7940,6440,41019,41019,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7936,17176,32528,32528,57154,7968,5984,5984,6440,6440,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7936,7936,7968,57154,57154,0,57154,5984,5984,6440,6440,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7936,65535,57154,57154,5984,5984,5984,6440,6440,6440,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7936,57154,57154,28416,5984,47192,5984,6440,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,47192,5984,47192,7936,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
};
//this is the image of the berry
const uint16_t berry[]=
{
	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,22355,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,13474,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,10051,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,10051,0,10051,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,10051,0,0,0,10051,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,41236,0,0,0,0,10051,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,50473,41236,0,0,0,0,0,50473,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7233,7233,7233,0,0,0,0,7233,7233,7233,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7233,65535,56014,7233,7233,0,0,55336,7233,65535,7233,7233,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7233,7233,7233,7233,55336,0,0,55336,55336,7233,7233,7233,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,55336,55336,3856,3856,3856,0,0,55336,55336,55336,7233,7233,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,55336,3856,3856,0,0,0,0,55336,3856,3856,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
};
//this is the image of the banana
const uint16_t banana[]=
{
	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,25104,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,60680,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3344,3600,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,14389,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16135,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,57095,57095,16135,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,57095,65287,16135,16135,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,57095,65287,16135,16135,64294,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,57095,57095,65287,16135,16135,64294,47438,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,65287,65287,65287,16135,16135,16135,47438,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,57095,57095,57095,65287,16135,16135,16135,16135,47438,47438,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,57095,65287,65287,16135,16135,16135,16135,64294,64294,47438,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,54019,16135,57095,57095,16135,16135,16135,16135,64294,47438,47438,47438,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64294,64294,47438,47438,47438,47438,47438,47438,47438,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
};
//background
//this is the image of the clouds in the background
const uint16_t cloud[]=
{
	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,57318,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,56261,57318,56261,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,57318,57318,57318,57318,57318,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,56261,57318,56261,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,57318,0,0,0,0,0,0,0,0,0,0,65535,65535,65535,65535,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,65535,65535,65535,65535,65535,65535,65535,65535,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,65535,65535,65535,65535,65535,65535,65535,65535,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,0,0,0,65535,65535,65535,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,0,65535,65535,65535,65535,65535,0,0,0,0,0,0,0,0,0,0,65535,65535,65535,0,65535,7382,65535,65535,65535,65535,65535,65535,65535,65535,65535,32222,65535,65535,65535,65535,65535,65535,65535,0,0,0,0,0,0,0,0,32222,65535,65535,65535,65535,65535,65535,7382,65535,65535,65535,65535,65535,65535,65535,32222,65535,65535,65535,65535,65535,65535,65535,32222,0,0,0,0,0,0,0,0,32222,32222,65535,65535,65535,65535,65535,32222,7382,65535,65535,65535,65535,65535,32222,32222,65535,65535,65535,65535,65535,65535,32222,32222,0,0,0,0,0,0,0,0,32222,32222,32222,32222,32222,32222,32222,32222,32222,32222,32222,32222,32222,32222,32222,32222,32222,32222,32222,32222,32222,32222,32222,32222,0,0,0,0,0,0,0,0,0,32222,32222,32222,32222,32222,32222,32222,32222,32222,32222,32222,32222,32222,32222,32222,32222,32222,32222,32222,32222,32222,32222,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
};
//this is the image of the moon in the background
const uint16_t moon[]=
{
	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16648,10826,24840,0,58136,43602,16384,0,0,0,0,0,0,0,0,0,0,0,0,0,0,58400,20595,45179,45179,61819,2105,0,0,0,0,0,0,49672,44122,50208,21131,31173,60242,8192,0,0,0,0,0,0,0,0,0,0,33296,45179,12932,38564,65518,24559,16367,32751,6581,4740,4740,26153,0,0,0,33032,43330,58136,44923,39100,26945,8192,0,0,0,0,0,0,0,16384,57872,53627,30372,24550,24559,16367,57318,57318,57318,57318,8175,24559,16367,14517,54156,25889,0,0,0,0,49680,51001,0,0,0,0,0,0,0,0,49152,61299,30372,57054,32751,65518,57318,57318,57318,57318,65519,24559,57318,57318,57318,16367,65518,6053,9249,0,0,0,0,0,0,0,0,0,0,0,0,0,24576,1585,52050,39877,48862,57054,57318,65518,57318,57318,24559,32751,57318,57318,57318,57318,57318,57318,14253,1057,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8192,17961,10033,2898,40142,40670,57318,57318,57318,57318,57318,57318,57318,57318,57318,65518,49126,22445,1057,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,40960,34081,35930,40406,65518,57318,49126,49126,49126,49126,49126,49126,57318,49126,49126,63140,57872,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,32768,27474,32214,8175,65510,57318,49126,65510,40934,24550,32742,32742,40942,31950,9513,8192,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,32768,35922,24022,65518,49126,40934,32742,32742,40934,32742,57318,32742,8166,22445,41224,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24576,44122,7382,40934,16358,40934,16375,65254,40934,65254,40934,32742,31165,41224,0,0,0,0,0,0,0,0,0,0,0,0,0,40960,58400,8192,0,0,0,16384,12403,32750,40678,57062,65254,57062,40678,57062,40678,32742,56261,34609,16384,0,0,0,0,0,0,0,0,0,0,0,40960,43602,30644,34881,16384,0,0,0,19018,23502,32742,24550,65254,32742,57062,32742,48870,57318,32742,38829,57600,0,0,0,0,0,0,0,0,0,0,0,16648,53899,64469,28539,32768,0,0,0,0,53627,57318,24286,24286,24286,24286,40678,65254,40678,65510,39877,34873,16384,0,0,0,0,0,0,0,0,40960,59978,43858,58400,36194,8456,8984,10297,8192,0,0,36987,57318,24286,24286,24286,24286,48870,24559,57062,40934,65518,6053,49152,0,0,0,0,0,0,0,0,264,61035,20595,528,0,0,42273,27730,16384,0,0,36987,24550,65254,57062,7910,57062,7910,57062,7910,16102,8175,22445,49152,0,0,0,0,17441,0,0,0,0,0,0,0,0,0,0,0,0,0,0,20595,24550,65262,65254,7902,57054,16094,57054,24286,7910,16367,38829,49152,0,0,0,0,2634,0,0,0,0,0,0,0,0,0,0,0,0,0,42801,55477,8166,65254,65254,16094,57054,24286,57054,32478,16358,48334,11090,24576,0,0,0,0,50208,0,0,0,0,0,0,0,0,0,0,0,0,34609,63925,16367,7910,32222,40670,40670,40670,32478,40670,57062,23501,60242,8192,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3427,24559,8166,16094,40670,32478,57054,8175,48870,40670,40942,14781,33032,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,18489,39357,57326,57062,48613,64997,56805,7654,48878,57062,32742,7382,2634,32768,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,10297,64189,49134,48870,7654,40421,56805,48613,40421,32229,7654,32750,47805,8720,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2105,6853,49134,24294,56805,32229,40421,16118,40686,32229,64997,32742,64453,51265,24576,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16384,8720,10297,15045,40934,24294,65262,48886,64997,40421,40422,7654,64997,32742,64461,43073,8192,0,0,0,0,0,0,0,0,0,0,0,8192,58136,50200,17176,34609,47285,48334,40934,64997,48878,49151,8191,32494,32229,56805,24294,40942,64453,43073,8192,0,0,0,0,0,0,0,0,0,0,0,0,57600,29059,63405,15310,32214,8175,16366,7654,32229,56805,32502,40951,57062,40678,32750,40150,31165,51521,8192,0,0,0,0,0,0,0,0,0,0,0,0,0,8192,57872,34081,30372,47805,39877,8166,65262,48870,24294,65254,8175,56534,63933,55733,35138,33032,0,0,9513,17969,17969,17969,17969,26161,50737,58136,0,0,0,0,0,0,0,0,33032,33032,26153,54948,63669,15045,65518,16367,15574,3162,8456,17969,10306,26425,26425,35146,31446,16119,65007,65007,16119,64478,63157,3435,0,0,0,0,0,0,0,0,0,0,8192,8456,57600,10297,54948,6053,44122,0,50209,38581,65271,40695,40695,48887,57343,65535,65535,65535,32503,36996,49416,57344,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,50209,59986,19026,22197,65535,65535,65535,65535,65535,65535,65535,8191,65007,20612,264,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,58136,60250,38053,65535,65535,65535,8191,16375,24567,24567,24303,30125,13212,12940,3435,264,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,42545,38053,54437,54437,54437,54437,54172,29324,37516,45716,4484,49936,0,0,0,0,0,0,0,0,0
};

//this is the image of the crown 
const uint16_t crown[]=
{
	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36093,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36093,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8039,48902,8039,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,48902,48902,48902,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,48902,48902,48902,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7173,48902,1016,48902,65431,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7173,0,0,0,0,7173,1016,1016,1016,65431,65431,0,0,0,65310,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7173,48902,0,0,7173,7173,1016,1016,1016,65431,65431,0,0,48902,65310,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7173,48902,7173,7173,7173,7173,48902,1016,48902,65431,65431,48902,48902,48902,65310,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7173,8064,7173,7173,7173,7173,48902,48902,48902,65431,65431,48902,48902,8064,65310,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,23812,23812,23812,23812,23812,23812,23812,23812,23812,23812,23812,23812,23812,23812,23812,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7173,7173,48902,7173,7173,7173,7173,48902,48902,48902,65431,65431,48902,48902,48902,65310,65310,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
};

//this is declaring the fruit array and initialising all of our fruits into the array
const uint16_t *fruitArray[FRUIT_TYPES]={grape, strawberry, berry, banana};

//this is the sound that plays when you catch fruit
uint32_t tune1_notes[] = { NOTE_E5, NOTE_B4,4};

//this is the sound that plays when the game starts
uint32_t beep_notes[] = { NOTE_C4, 10 };

//this is the song that plays during the menu
uint32_t tune2_notes[]= {NOTE_E5,8, NOTE_E5,8, REST,8, NOTE_E5,8, REST,8, NOTE_C5,8, NOTE_E5,8, //1
  NOTE_G5,4, REST,4, NOTE_G4,8, REST,4, 
  NOTE_C5,-4, NOTE_G4,8, REST,4, NOTE_E4,-4, // 3
  NOTE_A4,4, NOTE_B4,4, NOTE_AS4,8, NOTE_A4,4,
  NOTE_G4,-8, NOTE_E5,-8, NOTE_G5,-8, NOTE_A5,4, NOTE_F5,8, NOTE_G5,8,
  REST,8, NOTE_E5,4,NOTE_C5,8, NOTE_D5,8, NOTE_B4,-4,
  NOTE_C5,-4, NOTE_G4,8, REST,4, NOTE_E4,-4, // repeats from 3
  NOTE_A4,4, NOTE_B4,4, NOTE_AS4,8, NOTE_A4,4,
  NOTE_G4,-8, NOTE_E5,-8, NOTE_G5,-8, NOTE_A5,4, NOTE_F5,8, NOTE_G5,8,
  REST,8, NOTE_E5,4,NOTE_C5,8, NOTE_D5,8, NOTE_B4,-4,
  REST,4, NOTE_G5,8, NOTE_FS5,8, NOTE_F5,8, NOTE_DS5,4, NOTE_E5,8,//7
  REST,8, NOTE_GS4,8, NOTE_A4,8, NOTE_C4,8, REST,8, NOTE_A4,8, NOTE_C5,8, NOTE_D5,8,
  REST,4, NOTE_DS5,4, REST,8, NOTE_D5,-4,
  NOTE_C5,2, REST,2, REST,4, NOTE_G5,8, NOTE_FS5,8, NOTE_F5,8, NOTE_DS5,4, NOTE_E5,8,//repeats from 7
  REST,8, NOTE_GS4,8, NOTE_A4,8, NOTE_C4,8, REST,8, NOTE_A4,8, NOTE_C5,8, NOTE_D5,8,
  REST,4, NOTE_DS5,4, REST,8, NOTE_D5,-4,
  NOTE_C5,2, REST,2,NOTE_C5,8, NOTE_C5,4, NOTE_C5,8, REST,8, NOTE_C5,8, NOTE_D5,4,//11
  NOTE_E5,8, NOTE_C5,4, NOTE_A4,8, NOTE_G4,2,
  NOTE_C5,8, NOTE_C5,4, NOTE_C5,8, REST,8, NOTE_C5,8, NOTE_D5,8, NOTE_E5,8,//13
  REST,1, 
  NOTE_C5,8, NOTE_C5,4, NOTE_C5,8, REST,8, NOTE_C5,8, NOTE_D5,4,
  NOTE_E5,8, NOTE_C5,4, NOTE_A4,8, NOTE_G4,2,
  NOTE_E5,8, NOTE_E5,8, REST,8, NOTE_E5,8, REST,8, NOTE_C5,8, NOTE_E5,4,
  NOTE_G5,4, REST,4, NOTE_G4,4, REST,4, 
  NOTE_C5,-4, NOTE_G4,8, REST,4, NOTE_E4,-4, // 19

};

//declaring more global variables
//these are the varaiables for the songs
int tune_playing = 0;
int tune_length = 4;
int tune_index = 0;
int tune_time_remaining = 0;
int tune_repeat = 0;

int won = 0;

//these are variables for the characters movement
int hinverted = 0;
int vinverted = 0;
int toggle = 0;
int hmoved = 0;
int vmoved = 0;
uint16_t lol = 1;

//these are the variables for connecting the keyboard to the game
int keyPressed = 0;
char key = '\0';

//this is the variable for the movement 'for selection' on the menu screens 
uint16_t choose_y = 0;

uint16_t begin = 0;
uint16_t missedFruits = 0;


int main()
{//start main

	//declaring variables
	int exit = 1;
	int nextLevel = 1;
	int x;
	
	//function calls
	initClock();
	initSerial();
	initSysTick();
	setupIO();
	initSound();
	//calls main menu
	menu();
	
	if(won!=1)
	{//start if

		//this will display the image of the background and the princess at the start of the game
		putImage(20,124,32,32,princessfront,0,0);
		putImage(0,20,32,32,cloud,0,0);
		
		putImage(90,50,26,32,cloud,1,0);
		putImage(90,0,32,32,moon,0,0);

	}//end if
	fillRectangle(0,156,128,4,RGBToWord(255,0,234));
	
	initFruits();
	




while(1)
	{//start while

		//this is the function call for the game
		game();

		//this if statement is for if the player wins the 1st level
		if (won&&nextLevel )
		{//start if
		
			choose_y = 0;
			fillRectangle(0,0,128,160,0);
			
			//music turn off
			TIM14->CR1 &= ~(1 << 0);

			//the player is congratulated
			printTextX2("YOU HAVE",10,20, RGBToWord(0x99,0x33,0x66),0);
			printTextX2("COMPLETED",10,45, RGBToWord(0x99,0x33,0x66),0);
			printTextX2("LEVEL 1!",10,75, RGBToWord(0x99,0x33,0x66),0);
			printTextX2("Congrats!",10,100, RGBToWord(0x99,0x33,0x66),0);
			putImage(52,120,32,32,crown,0,0);
			delay(500);
			do
			{
				if(Selectpressed())
				{
				
					clear();
				}
			} while (SelectNotPressed());

			//the player is asked if they want to proceed to the next level
			fillRectangle(0,0,128,160,0);
			printTextX2("START THE ",5,30, RGBToWord(0x99,0x33,0x66),0);
			printTextX2("NEXT LEVEL",5,60, RGBToWord(0x99,0x33,0x66),0);

			printTextX2("??",5,80, RGBToWord(0x99,0x33,0x66),0);
			printText("Yes ",22,100, RGBToWord(0x99,0x33,0x66),0);
			printText("No ",22,120, RGBToWord(0x99,0x33,0x66),0);
			fillRectangle(10,100, 10, 10, RGBToWord(255,50,50));
			do
			{
				
				//this if statement allows the player to go up and down on the menu.
				if (downPressed()||upPressed())
				{//start outer if

					if (downPressed())
					{//start inner if
					choose_y++;
					}//end inner if

					else
					{//start inner else
						choose_y--;
					}//end inner else

					if(choose_y > 1 )
					{//start inner if
					choose_y = 0;
					fillRectangle(10,120, 10, 10, 0);
					fillRectangle(10,100, 10, 10, RGBToWord(255,50,50));
					}//end inner if

					else
					{//start inner else
						fillRectangle(10,100, 10, 10, 0);
						fillRectangle(10,120, 10, 10, RGBToWord(255,50,50));
					}//end inner else

				}//end outer if

				delay(175);

			} while(Selectpressed()==0);
			
			//when an option is selected the screen will be cleared. 
			fillRectangle(0,0,128,160,0);

			//if they chose no to playing the next level the game restarts.
			if (choose_y == 1)
			{//start if

					//the credits will be displayed
					credits();
					delay(1000);
					won = 0;
					//exit = 0
					//then back to the main menu
					menu();
					
					help();
					
					goals();

			}//end if
			else
			{//start else
				won = 0;
				level2();
			}//end else
			
		}//end if	

		restart();

	
    }//end while
	
	return 0;

}//end main


void initSysTick(void)
{//start function
	SysTick->LOAD = 48000;
	SysTick->CTRL = 7;
	SysTick->VAL = 10;
	__asm(" cpsie i "); // enable interrupts
}//end function

void SysTick_Handler(void)
{//start function 
	milliseconds++;
	
}//end function

void initClock(void)
{//start function

// This is potentially a dangerous function as it could
// result in a system with an invalid clock signal - result: a stuck system
        // Set the PLL up
        // First ensure PLL is disabled
        RCC->CR &= ~(1u<<24);
        while( (RCC->CR & (1 <<25))); // wait for PLL ready to be cleared
        
// Warning here: if system clock is greater than 24MHz then wait-state(s) need to be
// inserted into Flash memory interface
				
        FLASH->ACR |= (1 << 0);
        FLASH->ACR &=~((1u << 2) | (1u<<1));
        // Turn on FLASH prefetch buffer
        FLASH->ACR |= (1 << 4);
        // set PLL multiplier to 12 (yielding 48MHz)
        RCC->CFGR &= ~((1u<<21) | (1u<<20) | (1u<<19) | (1u<<18));
        RCC->CFGR |= ((1<<21) | (1<<19) ); 

        // Need to limit ADC clock to below 14MHz so will change ADC prescaler to 4
        RCC->CFGR |= (1<<14);

        // and turn the PLL back on again
        RCC->CR |= (1<<24);        
        // set PLL as system clock source 
        RCC->CFGR |= (1<<1);

}//end function

//this function cause the program to pause for a specific amount of time in milliseconds
void delay(volatile uint32_t dly)
{//start delay

	uint32_t end_time = dly + milliseconds;
	while(milliseconds != end_time)
		__asm(" wfi "); // sleep

}//end delay

void enablePullUp(GPIO_TypeDef *Port, uint32_t BitNumber)
{//start function

	Port->PUPDR = Port->PUPDR &~(3u << BitNumber*2); // clear pull-up resistor bits
	Port->PUPDR = Port->PUPDR | (1u << BitNumber*2); // set pull-up bit

}//end function

void pinMode(GPIO_TypeDef *Port, uint32_t BitNumber, uint32_t Mode)
{//start function

	uint32_t mode_value = Port->MODER;
	Mode = Mode << (2 * BitNumber);
	mode_value = mode_value & ~(3u << (BitNumber * 2));
	mode_value = mode_value | Mode;
	Port->MODER = mode_value;

}//end function

//this function checks to see if a object is inside a certain point 
int isInside(uint16_t x1, uint16_t y1, uint16_t w, uint16_t h, uint16_t px, uint16_t py)
{//start function

	// checks to see if point px,py is within the rectange defined by x,y,w,h
	uint16_t x2,y2;
	x2 = x1+w;
	y2 = y1+h;
	int rvalue = 0;
	if ( (px >= x1) && (px <= x2))
	{//start if

		// ok, x constraint met
		if ( (py >= y1) && (py <= y2))
			rvalue = 1;

	}//end if

	return rvalue;

}//end function

void setupIO()
{//start function

	RCC->AHBENR |= (1 << 18) + (1 << 17); // enable Ports A and B
	display_begin();
	pinMode(GPIOB,4,0);
	pinMode(GPIOB,5,0);
	pinMode(GPIOA,8,0);
	pinMode(GPIOB,0,0);
	pinMode(GPIOA,11,0);

	pinMode(GPIOA,0,1);
	pinMode(GPIOA,2,1);
	pinMode(GPIOA,1,1);
	enablePullUp(GPIOB,4);
	enablePullUp(GPIOB,5);
	enablePullUp(GPIOA,11);
	enablePullUp(GPIOA,8);
	enablePullUp(GPIOB,0);
	
}//end function


// Initialize fruits
void initFruits()
{	//start function

    for (int i = 0; i < MAX_FRUITS; i++)
    {//start for

        fruitActive[i] = 0;

    }//end for
	
}//end function

//this is the function for the music
void playTune(uint32_t* the_notes,uint32_t* the_times)
{//start of the function

	tune_playing = 1;
	
}//end of the function

//buttons
//this is the function for the select button
int Selectpressed()
{//start Select

	if((GPIOB->IDR & (1 << 0))==0)
		return 1;
	else
		return 0;

}//end Select

//this is the function for the down button
int downPressed()
{//start down 

	if( (GPIOA->IDR & (1 << 11)) == 0)
		return 1;
	else
		return 0;

}//end down

//this is the function for the up pressed
int upPressed()
{//start up

	if( (GPIOA->IDR & (1 << 8)) == 0)
		return 1;
	else
		return 0;

}//end up

//menu options
void start()
{//start start function
	
	//makes screen black
	fillRectangle(0,0,128,160,0);

}//end start

void help()
{//start help

	

		//this displays information that helps the players
		printTextX2("HELP:",25,5, RGBToWord(0x99,0x33,0x66),0);
		printTextX2("MOVE LEFT ", 5, 25, RGBToWord(0x99,0x33,0x66), 0);
		printTextX2("& RIGHT!!", 5, 45, RGBToWord(0x99,0x33,0x66), 0);
		printTextX2("CATCH ALL", 5, 65, RGBToWord(0x99,0x33,0x66), 0);
		printTextX2("THE FRUIT!!", 1, 85, RGBToWord(0x99,0x33,0x66), 0);

		//this stops the user from accidentally skipping past the help page by delaying select
		delay(500);

		do
		{//start do

			if(Selectpressed())
			{//start if

				clear();

			}//end if

		//end do
		} while (SelectNotPressed());

}//end help

//this function tells the player the goals of the game
void goals()
{//start goals

	

		while(Selectpressed()==0);
		fillRectangle(0,0,128,160,0);

		//this explains to the user what the goals of the game is
		printTextX2("GOALS:",25,5, RGBToWord(0x99,0x33,0x66),0);
		printText("There's 2 levels!", 0,40, RGBToWord(0x99,0x33,0x66), 0);
		printText("You need to ", 0,55, RGBToWord(0x99,0x33,0x66), 0);
		printText("collect 5 fruits", 0,70, RGBToWord(0x99,0x33,0x66), 0);
		printText("in level one and", 0,85, RGBToWord(0x99,0x33,0x66), 0);
		printText("10 in level two!", 0,100, RGBToWord(0x99,0x33,0x66), 0);
		printText("You have 3 lifes!", 5,115, RGBToWord(0x99,0x33,0x66), 0);
		
		//this stops the user from accidentally skipping past the help page by delaying select
		
		delay(500);
		do
		{//start do

			if(Selectpressed())
			{//start if
			
				clear();
			}//end if
		//end do
		} while (SelectNotPressed());

}//end goals

void credits()
{//start credits

		printTextX2("By:",25,15, RGBToWord(0x99,0x33,0x66),0);
		printText("Polina Tiukavkina,", 0,40, RGBToWord(0x99,0x33,0x66), 0);
		printText("Heeyeon Yoon,", 0,60, RGBToWord(0x99,0x33,0x66), 0);
		printText("Faith Omotayo", 0,80, RGBToWord(0x99,0x33,0x66), 0);


		//this stops the user from accidentally skipping past the help page by delaying select
		delay(500);

		do
		{//start do

			if(Selectpressed())
			{//start if

				clear();

			}//end if

		//end do
		} while (SelectNotPressed());

		fillRectangle(0,0,128,160,0);
		

}//end credits

void menu()
{//start menu

	int m = 10;							
		
	do 
	{
		//background music
		if (m==100)
		{
			m=0;
		}
		playNote(tune2_notes[m]);
		m++;

		//menu
		printTextX2("FRUIT",25,20, RGBToWord(0x99,0x33,0x66),0);
		printTextX2("GAMBITS!!",25,40, RGBToWord(0x99,0x33,0x66),0);
		printTextX2("START", 25, 90, RGBToWord(0x99,0x33,0x66), 0);
		fillRectangle(10,90 + (choose_y * 15), 10, 10, 0);
		fillRectangle(10,90 + (choose_y * 15), 10, 10, RGBToWord(255,50,50));
		delay(175);
	} while(Selectpressed()==0);
	fillRectangle(0,0,128,160,0);

	if ((choose_y == 0))
	{
		TIM14->CR1 &= ~(1 << 0);
		//this calls the help function
		help();
		//this calls the goal function
		goals();

		fillRectangle(0,0,128,150,0);
	
	//this while loop countsdown from 3 into the game
	while((Selectpressed)== 0)
			fillRectangle(0,0,128,150,0);
			printTextX2("LEVEL 1!", 25, 60, RGBToWord(0x99,0x33,0x66), 0);
			delay(620);
			fillRectangle(0,0,128,150,0);
			printTextX2("3", 25, 60, RGBToWord(0x99,0x33,0x66), 0);
			for (int m=0;m<=2;m++)
				{
					playNote(tune1_notes[m]);
					delay(100);
				}
					TIM14->CR1 &= ~(1 << 0);
			//this displays 3 crowns
			putImage(40,50,32,32,crown,0,0);
			putImage(65,50,32,32,crown,0,0);
			putImage(90,50,32,32,crown,0,0);
			delay(920);

			//this gets rid of the 3 crowns
			fillRectangle(40,50,32,32,0);
			fillRectangle(65,50,32,32,0);
			fillRectangle(90,50,32,32,0);

			printTextX2("2", 25, 60, RGBToWord(0x99,0x33,0x66), 0);
			for (int m=0;m<=2;m++)
				{
					playNote(tune1_notes[m]);
					delay(100);
				}
					TIM14->CR1 &= ~(1 << 0);
			
			//this displays 2 crowns
			putImage(40,50,32,32,crown,0,0);
			putImage(65,50,32,32,crown,0,0);
			delay(620);
			
			//this gets rid of the 2 crowns 
			fillRectangle(40,50,32,32,0);
			fillRectangle(65,50,32,32,0);

			printTextX2("1", 25, 60, RGBToWord(0x99,0x33,0x66), 0);
			for (int m=0;m<=2;m++)
				{
					playNote(tune1_notes[m]);
					delay(100);
				}
					TIM14->CR1 &= ~(1 << 0);
			
			//this displays 1 crown
			putImage(40,50,32,32,crown,0,0);
			//thisclears the screen
			fillRectangle(0,0,128,150,0);
			delay(620);
			
			printTextX2("START!", 25, 60, RGBToWord(0x99,0x33,0x66), 0);
			for (int m=0;m<=2;m++)
				{
					playNote( beep_notes[m]);
					delay(100);
				}
					TIM14->CR1 &= ~(1 << 0);

			delay(920);
			fillRectangle(0,0,128,150,0);

	}//end while

	//while((GPIOB->IDR & (1 << 0))==0)
	fillRectangle(0,0,128,160,0);	
	
}//end menu

//this for level1
void game()
{//start menu

	//turn off  menu background music
	TIM14->CR1 &= ~(1 << 0);

	//these are variables for the princess moving
	uint16_t x = 20; // Initial x position for princess
	uint16_t y = 124; // Initial y position for princess
	uint16_t oldx = x;
	uint16_t oldy = y;

	//these are variables for the fruit
	uint16_t fruit_x = 70;
	uint16_t fruit_y = 0;
	uint16_t speed = 2;
	uint16_t count = 0;
	uint16_t *p = &count;
	uint16_t countt = 0;
	
	//this is a variable for the music
	uint16_t m =0;

	//this while loop is for the game play
	while(won!=1)
	{
		
		//this puts the images of the clouds and moon into the back ground 
		putImage(0,20,32,32,cloud,0,0);
		putImage(90,50,32,32,cloud,1,0);
		putImage(90,0,32,32,moon,0,0);

		
		hmoved = vmoved = 0;
		hinverted = vinverted = 0;
		printText("Score:", 0,15, RGBToWord(0x99,0x33,0x66), 0);
		
		//this function call is passing our 
		updateScore(p);

		//this spawns the fruit 
        spawnRandomFruit(fruit_x, fruit_y, speed);
		do
		{
	
			lol = updateFruits(x,y,p);
			drawFruits();

			countt++;

		} while (lol!=0&&won!=1);
		delay(100);
		



		//movements
		if ((GPIOB->IDR & (1 << 4))==0) // right pressed
		{					
			if (x < 96)
			{
				x = x + 2;
				hmoved = 1;
				hinverted=0;
			}						
		}
		if ((GPIOB->IDR & (1 << 5))==0) // left pressed
		{			
			
			if (x > 10)
			{
				x = x - 2;
				hmoved = 1;
				hinverted=1;
			}			
		}
		if ( (GPIOA->IDR & (1 << 11)) == 0) // down pressed (may be unnecessary)
		{
			if (y < 125)
			{
				y = y + 2;			
				vmoved = 1;
				vinverted = 0;
			}
		}
		if ( (GPIOA->IDR & (1 << 8)) == 0) // up pressed
		{			
			if (y > 125)
			{
				y = y - 2;
				vmoved = 1;
				vinverted = 1;
			}
		}
		if ((vmoved) || (hmoved))
		{
			// only redraw if there has been some movement (reduces flicker)
			//this will fill in the background for the princess
			fillRectangle(oldx,oldy,32,32,0);
			oldx = x;
			oldy = y;					
			if (hmoved)
			{//start outer if
				if (toggle)//start inner if

					//for the princess image when she is still
					putImage(x,y,32,32,princess,hinverted,0);

					//end inner if

				else//start inner else

					//for the princess image when she is moving
					putImage(x,y,32,32,princessmove,hinverted,0);

					//end inner else
				
				toggle = toggle ^ 1;
			}//end outer if

			else
			{//start outer else

				//for the princess image when she is facing forward
				putImage(x,y,32,32,princessfront,0,vinverted);
			}//end outer else
		

		// Now check for an overlap by checking to see if ANY of the 4 corners of deco are within the target area
		if (isInside(20,110,32,32,x,y) || isInside(20,110,32,32,x+20,y) || isInside(20,110,32,32,x,y+16) || isInside(20,110,32,32,x+20,y+16) )
		{//start if

			//printTextX2("Caught!", 10, 20, RGBToWord(0xff,0xff,0), 0);

		}//end if
		}		
		else 
		{//end else 

			//if there's no movement detected, return to the default position
			putImage(x,y,32,32,princessfront,0,vinverted);

			
		}//end else
	
	}
}//end game

//this is the function for the 2nd level

void level2()
{
	missedFruits = 0;
	turnOffLEDs();
	//turn off  menu background music
	TIM14->CR1 &= ~(1 << 0);

	//declaring the variables for the princess moving
	uint16_t x = 20; // Initial x position for princess
	uint16_t y = 124; // Initial y position for princess
	uint16_t oldx = x;
	uint16_t oldy = y;

	//declaring the variables for the fruit
	uint16_t fruit_x = 70;
	uint16_t fruit_y = 0;
	uint16_t speed = 2;
	uint16_t count = 0;
	uint16_t *p = &count;
	uint16_t countt = 0;
	
	//declaring the variable for the music
	uint16_t m =0;


	while(won!=1)
	{
		
		//this function call puts the clouds and moon into the background
		putImage(0,20,32,32,cloud,0,0);
		putImage(90,50,32,32,cloud,1,0);
		putImage(90,0,32,32,moon,0,0);

		
		hmoved = vmoved = 0;
		hinverted = vinverted = 0;
		printText("Score:", 0,15, RGBToWord(0x99,0x33,0x66), 0);
		
		//this function call updates the score
		updateScore(p);

		//this function spawns fruit
        spawnRandomFruit(fruit_x, fruit_y, speed);
		do
		{//start do
	
			lol = updateFruits2(x,y,p);
			drawFruits();

			countt++;

			//end do
		} while (lol!=0&&won!=1);
		delay(100);

		//movements
		if ((GPIOB->IDR & (1 << 4))==0) // right pressed
		{					
			if (x < 110)
			{
				x = x + 2;
				hmoved = 1;
				hinverted=0;
			}						
		}
		if ((GPIOB->IDR & (1 << 5))==0) // left pressed
		{			
			
			if (x > 10)
			{
				x = x - 2;
				hmoved = 1;
				hinverted=1;
			}			
		}
		if ( (GPIOA->IDR & (1 << 11)) == 0) // down pressed (may be unnecessary)
		{
			if (y < 125)
			{
				y = y + 2;			
				vmoved = 1;
				vinverted = 0;
			}
		}
		if ( (GPIOA->IDR & (1 << 8)) == 0) // up pressed
		{			
			if (y > 125)
			{
				y = y - 2;
				vmoved = 1;
				vinverted = 1;
			}
		}
		if ((vmoved) || (hmoved))
		{
			// only redraw if there has been some movement (reduces flicker)
			//this is for the background of the princess
			fillRectangle(oldx,oldy,32,32,0);
			oldx = x;
			oldy = y;					
			if (hmoved)
			{//start outer if
				if (toggle)//start inner if

					putImage(x,y,32,32,princess,hinverted,0);

					//end inner if

				else//start inner else

					putImage(x,y,32,32,princessmove,hinverted,0);

					//end inner else

				toggle = toggle ^ 1;

			}//end outer if
			else
			{//start outer else

				//this is for when the princess is facing forward
				putImage(x,y,32,32,princessfront,0,vinverted);

			}//end outer else
		

		// Now check for an overlap by checking to see if ANY of the 4 corners of deco are within the target area
		if (isInside(20,110,32,32,x,y) || isInside(20,110,32,32,x+20,y) || isInside(20,110,32,32,x,y+16) || isInside(20,110,32,32,x+20,y+16) )
		{//start if
			//printTextX2("Caught!", 10, 20, RGBToWord(0xff,0xff,0), 0);
		}//end if
		}		

		else 
		{//start else
			//if there's no movement detected, return to the default position
			putImage(x,y,32,32,princessfront,0,vinverted);
			
		}//end else
	
	}//end while

}//end level2

//this function updates the fruits
uint16_t updateFruits2(uint16_t x, uint16_t y, uint16_t *p)
{
	int index = 0;
    for (int i = 0; i < MAX_FRUITS; i++) 
	{
        if (fruitActive[i])
		{
            fruitY[i] += fruitSpeed[i];
            // Check if the fruit is out of bounds
            if (isInside(fruitX[i], fruitY[i]-6, 32, 32, x+13, y)) 
			{
                (*p)++;
                updateScore(p);
				fillRectangle(fruitX[i],fruitY[i]-11,32,32,0);

				//sound when fruit is picked
				for (int m=0;m<=2;m++)
				{
					playNote(tune1_notes[m]);
					delay(100);
				}
					TIM14->CR1 &= ~(1 << 0);

					//game ends when you reach score of 10
					if (*(p)>=10)
					{//start if

						won = 1;

					}//end if
				
                fruitActive[i] = 0;//deactivate the fruit
				return fruitActive[i];
                break;
            } 

			//if fruit is not caught and reaches the ground
			//if fruit is not caught and reaches the ground
			else if (fruitY[i] > 125) 
			{//start else if
                fruitActive[i] = 0; // Deactivate the fruit
				fillRectangle(fruitX[i],fruitY[i]-2,32,32,0);
				missedFruits++;

				//turn on a LED when you dont catch a fruit
					if (missedFruits == 1)
					{//start outer if
						GPIOA->ODR |= (1 << 2);
					
					}

					else if (missedFruits == 2)
						{//start inner if

							GPIOA->ODR |= (1<<1);
						}
						else if (missedFruits == 3)
							{//start inner inner if

								GPIOA->ODR|=(1<<0);

							}//end inner inner if

				if(missedFruits >= 3)
				{

					won = 1;
					lose();

				}//end if

		
			return fruitActive[i];

            }//end else if

        }//end inner if

    }//end outer if

}//end updateFruit2

//this function is for spawning fruit
void spawnRandomFruit(uint16_t x, uint16_t y, uint16_t speed) 
{//start spawn fruit.

    // Find an inactive fruit slot to spawn a new fruit
    for (int i = 0; i < MAX_FRUITS; i++)
	{
        if (!fruitActive[i]) 
		{//start if

            uint16_t randomFruitIndex = rand() % FRUIT_TYPES; // Generate a random index within the range of fruitArray
			uint16_t ex = rand()%70;
			uint16_t ey = rand()%4;
			fruitX[i] = ex;
            fruitY[i] = ey;
            fruitSpeed[i] = speed;
            fruitType[i] = randomFruitIndex; // Store the type of fruit
            fruitActive[i] = 1;
			
            break;

        }//end if

    }//end for

}//end spawn fruit

//this functions off the leds after the player looses
void turnOffLEDs() {

    GPIOA->ODR &= ~((1 << 0) | (1 << 1) | (1 << 2)); // Turn off LEDs connected to GPIOA pins 0, 1, and 2

}//end function

// Update the position of fruits
uint16_t updateFruits(uint16_t x, uint16_t y, uint16_t *p)
{
	int index = 0;
    for (int i = 0; i < MAX_FRUITS; i++) 
	{

        if (fruitActive[i])
		{
            fruitY[i] += fruitSpeed[i];
            // Check if the fruit is out of bounds
            if (isInside(fruitX[i], fruitY[i]-6, 32, 32, x+13, y)) 
			{
                (*p)++;
                updateScore(p);
				fillRectangle(fruitX[i],fruitY[i]-11,32,32,0);

				//sound when fruit is picked
				for (int m=0;m<=2;m++)
				{
					playNote(tune1_notes[m]);
					delay(100);
				}
					TIM14->CR1 &= ~(1 << 0);

				

					//game ends when you reach score of 5
					if (*(p)>=5)
					{//start if
						
						won = 1;

					}//end if
				
                fruitActive[i] = 0;//deactivate the fruit
				return fruitActive[i];
                //break;
            } 

			//if fruit is not caught and reaches the ground
			else if (fruitY[i] > 125) 
			{//start else if
                fruitActive[i] = 0; // Deactivate the fruit
				fillRectangle(fruitX[i],fruitY[i]-2,32,32,0);
				missedFruits++;

				//turn on a LED when a fruit is missed
					if (missedFruits == 1)
					{//start outer if
						GPIOA->ODR |= (1 << 2);
					
					}

					else if (missedFruits == 2)
						{//start inner if

							GPIOA->ODR |= (1<<1);
						}
						else if (missedFruits == 3)
							{//start inner inner if

								GPIOA->ODR|=(1<<0);

							}//end inner inner if

				if(missedFruits >= 3)
				{
					
					won = 1;
					lose();

				}

		
			return fruitActive[i];

            }//end else if
			
        }//end if

}//end for

}//end update fruit


// Draw fruits on the screen
void drawFruits() 
{//start draw
	
	for (int i = 0; i < MAX_FRUITS; i++) 
	{//start for
        if (fruitActive[i]) {//start if

            // Draw the fruit at its current position
            const uint16_t *currentFruit = fruitArray[fruitType[i]]; // Get the fruit image based on its type
            putImage(fruitX[i], fruitY[i], 32, 32, currentFruit, 0, 0);

        }//end if

    }//end for

}//end draw

//this function prints the updated score
void updateScore(uint16_t* p)
{//start updateScore

	printNumber(*p,44,15,RGBToWord(0x99,0x33,0x66),0);

}//end updateScore

//this function helps restart the game  when the game is over.
void restart()
{//start restart

	//initialises missed fruits to 0
	missedFruits = 0;

	//this if happens when the player wins
	if (won&&exit)
		{//start if
		
			choose_y = 0;
			fillRectangle(0,0,128,160,0);
			
			//music turn off
			TIM14->CR1 &= ~(1 << 0);

			//the program congratulates the player for winning
			printTextX2("You won!",25,60, RGBToWord(0x99,0x33,0x66),0);
			printTextX2("Congrats!",22,80, RGBToWord(0x99,0x33,0x66),0);
			putImage(22,100,32,32,crown,0,0);
			delay(1000);

			//the program then asks them if they wanna play again
			fillRectangle(0,0,128,160,0);
			printText("Play again:",22,80, RGBToWord(0x99,0x33,0x66),0);
			printText("Yes ",22,100, RGBToWord(0x99,0x33,0x66),0);
			printText("No ",22,120, RGBToWord(0x99,0x33,0x66),0);
			fillRectangle(10,100, 10, 10, RGBToWord(255,50,50));
			do
			{//start do

				if (downPressed()||upPressed())
				{//start if
					if (downPressed())
					{//start inner if
				
					choose_y++;

					}//end inner if

					else
					{//start inner else

						choose_y--;

					}//end inner else

					if(choose_y > 1 )
					{//start inner if 

					choose_y = 0;
					fillRectangle(10,120, 10, 10, 0);
					fillRectangle(10,100, 10, 10, RGBToWord(255,50,50));

					}//end if

					else
					{//start if

						fillRectangle(10,100, 10, 10, 0);
						fillRectangle(10,120, 10, 10, RGBToWord(255,50,50));

					}//end if
				}
				delay(175);
			} while(Selectpressed()==0);

			fillRectangle(0,0,128,160,0);
			if (choose_y == 1)
			{//start if
					//in this if the credits are shown and then the game restarts and we are back to the menu and the start of the game.
					credits();
					delay(1000);
					won = 0;
					//exit = 0
					menu();
					help();
					goals();
					
					while((Selectpressed)== 0)

						fillRectangle(0,0,128,150,0);
						printTextX2("LEVEL 1", 25, 60, RGBToWord(0x99,0x33,0x66), 0);
						delay(620);
						fillRectangle(0,0,128,150,0);
						printTextX2("3", 25, 60, RGBToWord(0x99,0x33,0x66), 0);
						
						putImage(40,50,32,32,crown,0,0);
						putImage(65,50,32,32,crown,0,0);
						putImage(90,50,32,32,crown,0,0);
						
						delay(920);

						fillRectangle(40,50,32,32,0);
						fillRectangle(65,50,32,32,0);
						fillRectangle(90,50,32,32,0);

						printTextX2("2", 25, 60, RGBToWord(0x99,0x33,0x66), 0);
						
						putImage(40,50,32,32,crown,0,0);
						putImage(65,50,32,32,crown,0,0);
						
						delay(620);
						
						fillRectangle(40,50,32,32,0);
						fillRectangle(65,50,32,32,0);

						printTextX2("1", 25, 60, RGBToWord(0x99,0x33,0x66), 0);

						putImage(40,50,32,32,crown,0,0);
						
						fillRectangle(0,0,128,150,0);
						delay(620);
						
						fillRectangle(0,0,128,150,0);
						delay(620);
						printTextX2("START!!!", 25, 60, RGBToWord(0x99,0x33,0x66), 0);
						delay(920);
						fillRectangle(0,0,128,150,0);



					}//end if


							}
							else
							{//start else

								won = 0;
								game();

							}//end if

				while((GPIOB->IDR & (1 << 0))==0)
				fillRectangle(0,0,128,160,0);
					
	

}//end restart

void lose()
{
	
	
	//this if happens when the palyer loses the game
	if (won&&exit)
	{

			missedFruits = 0;

			//the player is told hard luck and is then given the option to start again
			fillRectangle(0,0,128,160,0);
			printTextX2("Hard",22,30, RGBToWord(0x99,0x33,0x66),0);
			printTextX2("luck",22,70, RGBToWord(0x99,0x33,0x66),0);
			delay(620);

			turnOffLEDs();

			fillRectangle(0,0,128,160,0);
			printText("Play again:",22,80, RGBToWord(0x99,0x33,0x66),0);
			printText("Yes ",22,100, RGBToWord(0x99,0x33,0x66),0);
			printText("No ",22,120, RGBToWord(0x99,0x33,0x66),0);
			fillRectangle(10,100, 10, 10, RGBToWord(255,50,50));

			do
			{//start do

				if (downPressed()||upPressed())
				{//start if
					if (downPressed())
					{//start inner if
				
					choose_y++;

					}//end inner if

					else
					{//start inner else

						choose_y--;

					}//end inner else

					if(choose_y > 1 )
					{//start inner if 

					choose_y = 0;
					fillRectangle(10,120, 10, 10, 0);
					fillRectangle(10,100, 10, 10, RGBToWord(255,50,50));

					}//end if

					else
					{//start if

						fillRectangle(10,100, 10, 10, 0);
						fillRectangle(10,120, 10, 10, RGBToWord(255,50,50));

					}//end if
				}
				delay(175);
			} while(Selectpressed()==0);

			fillRectangle(0,0,128,160,0);
			if (choose_y == 1)
			{//start if

					//in this if the credits are shown and then the game restarts and we are back to the menu and the start of the game.
					credits();
					delay(1000);
					won = 0;
					menu();
					help();
					goals();
					
					while((Selectpressed)== 0)

						fillRectangle(0,0,128,150,0);
						printTextX2("LEVEL 1", 25, 60, RGBToWord(0x99,0x33,0x66), 0);
						delay(620);
						fillRectangle(0,0,128,150,0);
						printTextX2("3", 25, 60, RGBToWord(0x99,0x33,0x66), 0);
						putImage(40,50,32,32,crown,0,0);
						
						delay(920);

						fillRectangle(40,50,32,32,0);
						fillRectangle(65,50,32,32,0);
						fillRectangle(90,50,32,32,0);

						printTextX2("2", 25, 60, RGBToWord(0x99,0x33,0x66), 0);
						
						putImage(40,50,32,32,crown,0,0);
						delay(620);
						
						fillRectangle(40,50,32,32,0);
						fillRectangle(65,50,32,32,0);

						printTextX2("1", 25, 60, RGBToWord(0x99,0x33,0x66), 0);

						putImage(40,50,32,32,crown,0,0);
					
						fillRectangle(0,0,128,150,0);
						delay(620);
						
						fillRectangle(0,0,128,150,0);
						delay(620);
						printTextX2("START!!!", 25, 60, RGBToWord(0x99,0x33,0x66), 0);
						delay(920);
						fillRectangle(0,0,128,150,0);

						game();

					}//end if
							else
							{//start else

								won = 0;
								game();

							}//end else


					while((GPIOB->IDR & (1 << 0))==0)
					fillRectangle(0,0,128,160,0);

							}
				

}//end lose

int SelectNotPressed()
{//start function
	if((GPIOB->IDR & (1 << 0))!=0)
	{//start if

		return 1;

	}//end if
	else
	{//start else

		return 0;

	}//end else
	
}//end function
